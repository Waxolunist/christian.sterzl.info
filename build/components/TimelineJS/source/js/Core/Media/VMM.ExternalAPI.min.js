function onYouTubePlayerAPIReady(){trace("GLOBAL YOUTUBE API CALLED"),VMM.ExternalAPI.youtube.onAPIReady()}"undefined"!=typeof VMM&&"undefined"==typeof VMM.ExternalAPI&&(VMM.ExternalAPI={keys:{google:"",flickr:"",twitter:""},keys_master:{vp:"Pellentesque nibh felis, eleifend id, commodo in, interdum vitae, leo",flickr:"RAIvxHY4hE/Elm5cieh4X5ptMyDpj7MYIxziGxi0WGCcy1s+yr7rKQ==",google:"jwNGnYw4hE9lmAez4ll0QD+jo6SKBJFknkopLS4FrSAuGfIwyj57AusuR0s8dAo=",twitter:""},init:function(){return this},setKeys:function(e){VMM.ExternalAPI.keys=e},pushQues:function(){VMM.master_config.googlemaps.active&&VMM.ExternalAPI.googlemaps.pushQue(),VMM.master_config.youtube.active&&VMM.ExternalAPI.youtube.pushQue(),VMM.master_config.soundcloud.active&&VMM.ExternalAPI.soundcloud.pushQue(),VMM.master_config.googledocs.active&&VMM.ExternalAPI.googledocs.pushQue(),VMM.master_config.googleplus.active&&VMM.ExternalAPI.googleplus.pushQue(),VMM.master_config.wikipedia.active&&VMM.ExternalAPI.wikipedia.pushQue(),VMM.master_config.vimeo.active&&VMM.ExternalAPI.vimeo.pushQue(),VMM.master_config.vine.active&&VMM.ExternalAPI.vine.pushQue(),VMM.master_config.twitter.active&&VMM.ExternalAPI.twitter.pushQue(),VMM.master_config.flickr.active&&VMM.ExternalAPI.flickr.pushQue(),VMM.master_config.webthumb.active&&VMM.ExternalAPI.webthumb.pushQue()},twitter:{tweetArray:[],get:function(e){var t={mid:e.id,id:e.uid};VMM.master_config.twitter.que.push(t),VMM.master_config.twitter.active=!0},create:function(e,t){e.mid.toString(),{twitterid:e.mid},"//api.twitter.com/1/statuses/show.json?id="+e.mid+"&include_entities=true&callback=?";VMM.ExternalAPI.twitter.getOEmbed(e,t)},errorTimeOut:function(e){trace("TWITTER JSON ERROR TIMEOUT "+e.mid),VMM.attachElement("#"+e.id.toString(),VMM.MediaElement.loadingmessage("Still waiting on Twitter: "+e.mid)),VMM.getJSON("//api.twitter.com/1/account/rate_limit_status.json",function(t){trace("REMAINING TWITTER API CALLS "+t.remaining_hits),trace("TWITTER RATE LIMIT WILL RESET AT "+t.reset_time);var a="";0==t.remaining_hits?(a="<p>You've reached the maximum number of tweets you can load in an hour.</p>",a+="<p>You can view tweets again starting at: <br/>"+t.reset_time+"</p>"):a="<p>Still waiting on Twitter. "+e.mid+"</p>",VMM.attachElement("#"+e.id.toString(),VMM.MediaElement.loadingmessage(a))})},errorTimeOutOembed:function(e){trace("TWITTER JSON ERROR TIMEOUT "+e.mid),VMM.attachElement("#"+e.id.toString(),VMM.MediaElement.loadingmessage("Still waiting on Twitter: "+e.mid))},pushQue:function(){VMM.master_config.twitter.que.length>0&&(VMM.ExternalAPI.twitter.create(VMM.master_config.twitter.que[0],VMM.ExternalAPI.twitter.pushQue),VMM.Util.removeRange(VMM.master_config.twitter.que,0))},getOEmbed:function(e,t){var a="//api.twitter.com/1/statuses/oembed.json?id="+e.mid+"&omit_script=true&include_entities=true&callback=?",i=setTimeout(VMM.ExternalAPI.twitter.errorTimeOutOembed,VMM.master_config.timers.api,e);VMM.getJSON(a,function(t){var a="",i="";a+=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",i=t.author_url.split("twitter.com/")[1],a+="<div class='vcard author'>",a+="<a class='screen-name url' href='"+t.author_url+"' target='_blank'>",a+="<span class='avatar'></span>",a+="<span class='fn'>"+t.author_name+"</span>",a+="<span class='nickname'>@"+i+"<span class='thumbnail-inline'></span></span>",a+="</a>",a+="</div>",VMM.attachElement("#"+e.id.toString(),a),VMM.attachElement("#text_thumb_"+e.id.toString(),t.html),VMM.attachElement("#marker_content_"+e.id.toString(),t.html)}).error(function(t,a){trace("TWITTER error"),trace("TWITTER ERROR: "+a+" "+t.responseText),clearTimeout(i),VMM.attachElement("#"+e.id,VMM.MediaElement.loadingmessage("ERROR LOADING TWEET "+e.mid))}).success(function(){clearTimeout(i),t()})},getHTML:function(e){var t="//api.twitter.com/1/statuses/oembed.json?id="+e+"&omit_script=true&include_entities=true&callback=?";VMM.getJSON(t,VMM.ExternalAPI.twitter.onJSONLoaded)},onJSONLoaded:function(e){trace("TWITTER JSON LOADED");var t=e.id;VMM.attachElement("#"+t,VMM.Util.linkify_with_twitter(e.html))},parseTwitterDate:function(e){var t=new Date(Date.parse(e));return t},prettyParseTwitterDate:function(e){var t=new Date(Date.parse(e));return VMM.Date.prettyDate(t,!0)},getTweets:function(e){for(var t=[],a=e.length,i=0;i<e.length;i++){var o="";o=e[i].tweet.match("status/")?e[i].tweet.split("status/")[1]:e[i].tweet.match("statuses/")?e[i].tweet.split("statuses/")[1]:"";var r="//api.twitter.com/1/statuses/show.json?id="+o+"&include_entities=true&callback=?";VMM.getJSON(r,function(e){var i={},o="<div class='twitter'><blockquote><p>",r=VMM.Util.linkify_with_twitter(e.text,"_blank");if(o+=r,o+="</p>",o+="— "+e.user.name+" (<a href='https://twitter.com/"+e.user.screen_name+"'>@"+e.user.screen_name+"</a>) <a href='https://twitter.com/"+e.user.screen_name+"/status/"+e.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(e.created_at)+" </a></blockquote></div>",i.content=o,i.raw=e,t.push(i),t.length==a){var n={tweetdata:t};VMM.fireEvent(global,"TWEETSLOADED",n)}}).success(function(){trace("second success")}).error(function(){trace("error")}).complete(function(){trace("complete")})}},getTweetSearch:function(e,t){var a=40;null!=t&&""!=t&&(a=t);var i="//search.twitter.com/search.json?q="+e+"&rpp="+a+"&include_entities=true&result_type=mixed",o=[];VMM.getJSON(i,function(e){for(var t=0;t<e.results.length;t++){var a={},i="<div class='twitter'><blockquote><p>",r=VMM.Util.linkify_with_twitter(e.results[t].text,"_blank");i+=r,i+="</p>",i+="— "+e.results[t].from_user_name+" (<a href='https://twitter.com/"+e.results[t].from_user+"'>@"+e.results[t].from_user+"</a>) <a href='https://twitter.com/"+e.results[t].from_user+"/status/"+e.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(e.results[t].created_at)+" </a></blockquote></div>",a.content=i,a.raw=e.results[t],o.push(a)}var n={tweetdata:o};VMM.fireEvent(global,"TWEETSLOADED",n)})},prettyHTML:function(e,t){var e=e.toString(),a="//api.twitter.com/1/statuses/show.json?id="+e+"&include_entities=true&callback=?",i=setTimeout(VMM.ExternalAPI.twitter.errorTimeOut,VMM.master_config.timers.api,e);VMM.getJSON(a,VMM.ExternalAPI.twitter.formatJSON).error(function(t,a){trace("TWITTER error"),trace("TWITTER ERROR: "+a+" "+t.responseText),VMM.attachElement("#twitter_"+e,"<p>ERROR LOADING TWEET "+e+"</p>")}).success(function(e){clearTimeout(i),t&&VMM.ExternalAPI.twitter.secondaryMedia(e)})},formatJSON:function(e){var t=e.id_str,a="<blockquote><p>",i=VMM.Util.linkify_with_twitter(e.text,"_blank");a+=i,a+="</p></blockquote>",a+="<div class='vcard author'>",a+="<a class='screen-name url' href='https://twitter.com/"+e.user.screen_name+"' data-screen-name='"+e.user.screen_name+"' target='_blank'>",a+="<span class='avatar'><img src=' "+e.user.profile_image_url+"'  alt=''></span>",a+="<span class='fn'>"+e.user.name+"</span>",a+="<span class='nickname'>@"+e.user.screen_name+"<span class='thumbnail-inline'></span></span>",a+="</a>",a+="</div>","undefined"!=typeof e.entities.media&&"photo"==e.entities.media[0].type&&(a+="<img src=' "+e.entities.media[0].media_url+"'  alt=''>"),VMM.attachElement("#twitter_"+t.toString(),a),VMM.attachElement("#text_thumb_"+t.toString(),e.text)}},googlemaps:{maptype:"TERRAIN",setMapType:function(e){""!=e&&(VMM.ExternalAPI.googlemaps.maptype=e)},get:function(e){var t,a;e.vars=VMM.Util.getUrlVars(e.id),t=""!=VMM.ExternalAPI.keys.google?VMM.ExternalAPI.keys.google:Aes.Ctr.decrypt(VMM.ExternalAPI.keys_master.google,VMM.ExternalAPI.keys_master.vp,256),a="//maps.googleapis.com/maps/api/js?key="+t+"&v=3.9&libraries=places&sensor=false&callback=VMM.ExternalAPI.googlemaps.onMapAPIReady",VMM.master_config.googlemaps.active?VMM.master_config.googlemaps.que.push(e):(VMM.master_config.googlemaps.que.push(e),VMM.master_config.googlemaps.api_loaded||LoadLib.js(a,function(){trace("Google Maps API Library Loaded")}))},create:function(e){VMM.ExternalAPI.googlemaps.createAPIMap(e)},createiFrameMap:function(e){var t=e.id+"&output=embed",a="",i=e.uid.toString()+"_gmap";a+="<div class='google-map' id='"+i+"' style='width=100%;height=100%;'>",a+="<iframe width='100%' height='100%' frameborder='0' scrolling='no' marginheight='0' marginwidth='0' src='"+t+"'></iframe>",a+="</div>",VMM.attachElement("#"+e.uid,a)},createAPIMap:function(e){function t(e){return e in VMM.ExternalAPI.googlemaps.map_providers?(c=VMM.ExternalAPI.googlemaps.map_attribution[VMM.ExternalAPI.googlemaps.map_providers[e].attribution],VMM.ExternalAPI.googlemaps.map_providers[e]):VMM.ExternalAPI.googlemaps.defaultType(e)?(trace("GOOGLE MAP DEFAULT TYPE"),google.maps.MapTypeId[e.toUpperCase()]):void trace("Not a maptype: "+e)}function a(){var t,a=new google.maps.Geocoder,o=VMM.Util.getUrlVars(e.id).q;if(o.match("loc:")){var r=o.split(":")[1].split("+");M=new google.maps.LatLng(parseFloat(r[0]),parseFloat(r[1])),p=!0}a.geocode({address:o},function(e,a){a==google.maps.GeocoderStatus.OK?(t=new google.maps.Marker({map:n,position:e[0].geometry.location}),"undefined"!=typeof e[0].geometry.viewport?n.fitBounds(e[0].geometry.viewport):"undefined"!=typeof e[0].geometry.bounds?n.fitBounds(e[0].geometry.bounds):n.setCenter(e[0].geometry.location),p&&n.panTo(M),d&&n.setZoom(g)):(trace("Geocode for "+o+" was not successful for the following reason: "+a),trace("TRYING PLACES SEARCH"),p&&n.panTo(M),d&&n.setZoom(g),i())})}function i(){function t(t,i){if(i==google.maps.places.PlacesServiceStatus.OK){for(var o=0;o<t.length;o++);p?n.panTo(M):t.length>=1&&(n.panTo(t[0].geometry.location),d&&n.setZoom(g))}else trace("Place search for "+a.query+" was not successful for the following reason: "+i),trace("YOU MAY NEED A GOOGLE MAPS API KEY IN ORDER TO USE THIS FEATURE OF TIMELINEJS"),trace("FIND OUT HOW TO GET YOUR KEY HERE: https://developers.google.com/places/documentation/#Authentication"),p?(n.panTo(M),d&&n.setZoom(g)):(trace("USING SIMPLE IFRAME MAP EMBED"),e.id[0].match("https")&&(e.id=e.url[0].replace("https","http")),VMM.ExternalAPI.googlemaps.createiFrameMap(e))}var a,i,o,r,s;place_search=new google.maps.places.PlacesService(n),i=new google.maps.InfoWindow,a={query:"",types:["country","neighborhood","political","locality","geocode"]},"string"==type.of(VMM.Util.getUrlVars(e.id).q)&&(a.query=VMM.Util.getUrlVars(e.id).q),p?(a.location=M,a.radius="15000"):(r=new google.maps.LatLng(-89.999999,-179.999999),s=new google.maps.LatLng(89.999999,179.999999),o=new google.maps.LatLngBounds(r,s)),place_search.textSearch(a,t)}function o(){var t,a,i,o;t=e.id+"&output=kml",t=t.replace("&output=embed",""),a=new google.maps.KmlLayer(t,{preserveViewport:!0}),i=new google.maps.InfoWindow,a.setMap(n),google.maps.event.addListenerOnce(a,"defaultviewport_changed",function(){p?n.panTo(M):n.fitBounds(a.getDefaultViewport()),d&&n.setZoom(g)}),google.maps.event.addListener(a,"click",function(e){function t(e){i.setContent(e),i.open(n)}o=e.featureData.description,t(o)})}var r,n,s,l,c="",m=e.uid.toString()+"_gmap",u="",M=new google.maps.LatLng(41.875696,-87.624207),g=11,p=!1,d=!1;google.maps.VeriteMapType=function(e){if(VMM.ExternalAPI.googlemaps.defaultType(e))return google.maps.MapTypeId[e.toUpperCase()];var a=t(e);return google.maps.ImageMapType.call(this,{getTileUrl:function(e,t){var i=(t+e.x+e.y)%VMM.ExternalAPI.googlemaps.map_subdomains.length,o=a.url.replace("{S}",VMM.ExternalAPI.googlemaps.map_subdomains[i]).replace("{Z}",t).replace("{X}",e.x).replace("{Y}",e.y).replace("{z}",t).replace("{x}",e.x).replace("{y}",e.y);return o},tileSize:new google.maps.Size(256,256),name:e,minZoom:a.minZoom,maxZoom:a.maxZoom})},google.maps.VeriteMapType.prototype=new google.maps.ImageMapType("_"),r=""!=VMM.ExternalAPI.googlemaps.maptype?VMM.ExternalAPI.googlemaps.defaultType(VMM.ExternalAPI.googlemaps.maptype)?google.maps.MapTypeId[VMM.ExternalAPI.googlemaps.maptype.toUpperCase()]:VMM.ExternalAPI.googlemaps.maptype:google.maps.MapTypeId.TERRAIN;var f=new RegExp(/@([0-9\.\-]+),([0-9\.\-]+),(\d+)z/);if(e.id.match(f)){var h=e.id.match(f);lat=parseFloat(h[1]),lng=parseFloat(h[2]),M=new google.maps.LatLng(lat,lng),g=parseFloat(h[3]),p=d=!0}else"string"==type.of(VMM.Util.getUrlVars(e.id).ll)?(p=!0,l=VMM.Util.getUrlVars(e.id).ll.split(","),M=new google.maps.LatLng(parseFloat(l[0]),parseFloat(l[1]))):"string"==type.of(VMM.Util.getUrlVars(e.id).sll)&&(l=VMM.Util.getUrlVars(e.id).sll.split(","),M=new google.maps.LatLng(parseFloat(l[0]),parseFloat(l[1]))),"string"==type.of(VMM.Util.getUrlVars(e.id).z)&&(d=!0,g=parseFloat(VMM.Util.getUrlVars(e.id).z));s={zoom:g,draggable:!1,disableDefaultUI:!0,mapTypeControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_RIGHT},center:M,mapTypeId:r,mapTypeControlOptions:{mapTypeIds:[r]}},VMM.attachElement("#"+e.uid,"<div class='google-map' id='"+m+"' style='width=100%;height=100%;'></div>"),n=new google.maps.Map(document.getElementById(m),s),VMM.ExternalAPI.googlemaps.defaultType(VMM.ExternalAPI.googlemaps.maptype)||(n.mapTypes.set(r,new google.maps.VeriteMapType(r)),u="<div class='map-attribution'><div class='attribution-text'>"+c+"</div></div>",VMM.appendElement("#"+m,u)),"string"==type.of(VMM.Util.getUrlVars(e.id).msid)?o():"string"==type.of(VMM.Util.getUrlVars(e.id).q)&&a()},pushQue:function(){for(var e=0;e<VMM.master_config.googlemaps.que.length;e++)VMM.ExternalAPI.googlemaps.create(VMM.master_config.googlemaps.que[e]);VMM.master_config.googlemaps.que=[]},onMapAPIReady:function(){VMM.master_config.googlemaps.map_active=!0,VMM.master_config.googlemaps.places_active=!0,VMM.ExternalAPI.googlemaps.onAPIReady()},onPlacesAPIReady:function(){VMM.master_config.googlemaps.places_active=!0,VMM.ExternalAPI.googlemaps.onAPIReady()},onAPIReady:function(){VMM.master_config.googlemaps.active||VMM.master_config.googlemaps.map_active&&VMM.master_config.googlemaps.places_active&&(VMM.master_config.googlemaps.active=!0,VMM.ExternalAPI.googlemaps.pushQue())},defaultType:function(e){return"satellite"==e.toLowerCase()||"hybrid"==e.toLowerCase()||"terrain"==e.toLowerCase()||"roadmap"==e.toLowerCase()?!0:!1},map_subdomains:["","a.","b.","c.","d."],map_attribution:{stamen:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='http://creativecommons.org/licenses/by/3.0'>CC BY 3.0</a>. Data by <a href='http://openstreetmap.org'>OpenStreetMap</a>, under <a href='http://creativecommons.org/licenses/by-sa/3.0'>CC BY SA</a>.",apple:"Map data &copy; 2012  Apple, Imagery &copy; 2012 Apple",osm:"&copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors"},map_providers:{toner:{url:"//{S}tile.stamen.com/toner/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-lines":{url:"//{S}tile.stamen.com/toner-lines/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-labels":{url:"//{S}tile.stamen.com/toner-labels/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},sterrain:{url:"//{S}tile.stamen.com/terrain/{Z}/{X}/{Y}.jpg",minZoom:4,maxZoom:20,attribution:"stamen"},apple:{url:"//gsp2.apple.com/tile?api=1&style=slideshow&layers=default&lang=en_US&z={z}&x={x}&y={y}&v=9",minZoom:4,maxZoom:14,attribution:"apple"},watercolor:{url:"//{S}tile.stamen.com/watercolor/{Z}/{X}/{Y}.jpg",minZoom:3,maxZoom:16,attribution:"stamen"},osm:{url:"//tile.openstreetmap.org/{z}/{x}/{y}.png",minZoom:3,maxZoom:18,attribution:"osm"}}},googleplus:{get:function(e){var t={user:e.user,activity:e.id,id:e.uid};VMM.master_config.googleplus.que.push(t),VMM.master_config.googleplus.active=!0},create:function(e,t){var a,i,o="",r="",n="",s="",l="";googleplus_timeout=setTimeout(VMM.ExternalAPI.googleplus.errorTimeOut,VMM.master_config.timers.api,e),callback_timeout=setTimeout(t,VMM.master_config.timers.api,e),r=""!=VMM.master_config.Timeline.api_keys.google?VMM.master_config.Timeline.api_keys.google:Aes.Ctr.decrypt(VMM.master_config.api_keys_master.google,VMM.master_config.vp,256),a="https://www.googleapis.com/plus/v1/people/"+e.user+"/activities/public?alt=json&maxResults=100&fields=items(id,url)&key="+r,o="GOOGLE PLUS API CALL",VMM.getJSON(a,function(t){for(var a=0;a<t.items.length;a++)if(trace("loop"),t.items[a].url.split("posts/")[1]==e.activity){trace("FOUND IT!!"),n=t.items[a].id,i="https://www.googleapis.com/plus/v1/activities/"+n+"?alt=json&key="+r,VMM.getJSON(i,function(t){if(trace(t),"undefined"!=typeof t.annotation?(s+="<div class='googleplus-annotation'>'"+t.annotation+"</div>",s+=t.object.content):s+=t.object.content,"undefined"!=typeof t.object.attachments){for(var a=0;a<t.object.attachments.length;a++)"photo"==t.object.attachments[a].objectType?l="<a href='"+t.object.url+"' target='_blank'><img src='"+t.object.attachments[a].image.url+"' class='article-thumb'></a>"+l:"video"==t.object.attachments[a].objectType?(l="<img src='"+t.object.attachments[a].image.url+"' class='article-thumb'>"+l,l+="<div>",l+="<a href='"+t.object.attachments[a].url+"' target='_blank'>",l+="<h5>"+t.object.attachments[a].displayName+"</h5>",l+="</a>",l+="</div>"):"article"==t.object.attachments[a].objectType&&(l+="<div>",l+="<a href='"+t.object.attachments[a].url+"' target='_blank'>",l+="<h5>"+t.object.attachments[a].displayName+"</h5>",l+="<p>"+t.object.attachments[a].content+"</p>",l+="</a>",l+="</div>"),trace(t.object.attachments[a]);l="<div class='googleplus-attachments'>"+l+"</div>"}o="<div class='googleplus-content'>"+s+l+"</div>",o+="<div class='vcard author'><a class='screen-name url' href='"+t.url+"' target='_blank'>",o+="<span class='avatar'><img src='"+t.actor.image.url+"' style='max-width: 32px; max-height: 32px;'></span>",o+="<span class='fn'>"+t.actor.displayName+"</span>",o+="<span class='nickname'><span class='thumbnail-inline'></span></span>",o+="</a></div>",VMM.attachElement("#googleplus_"+e.activity,o)});break}}).error(function(t){var a=VMM.parseJSON(t.responseText);trace(a.error.message),VMM.attachElement("#googleplus_"+e.activity,VMM.MediaElement.loadingmessage("<p>ERROR LOADING GOOGLE+ </p><p>"+a.error.message+"</p>"))}).success(function(){clearTimeout(googleplus_timeout),clearTimeout(callback_timeout),t()})},pushQue:function(){VMM.master_config.googleplus.que.length>0&&(VMM.ExternalAPI.googleplus.create(VMM.master_config.googleplus.que[0],VMM.ExternalAPI.googleplus.pushQue),VMM.Util.removeRange(VMM.master_config.googleplus.que,0))},errorTimeOut:function(e){trace("GOOGLE+ JSON ERROR TIMEOUT "+e.activity),VMM.attachElement("#googleplus_"+e.activity,VMM.MediaElement.loadingmessage("<p>Still waiting on GOOGLE+ </p><p>"+e.activity+"</p>"))}},googledocs:{get:function(e){VMM.master_config.googledocs.que.push(e),VMM.master_config.googledocs.active=!0},create:function(e){var t="";t=e.id.match(/docs.google.com/i)?"<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e.id+"&amp;embedded=true'></iframe>":"<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+e.id+"&amp;embedded=true'></iframe>",VMM.attachElement("#"+e.uid,t)},pushQue:function(){for(var e=0;e<VMM.master_config.googledocs.que.length;e++)VMM.ExternalAPI.googledocs.create(VMM.master_config.googledocs.que[e]);VMM.master_config.googledocs.que=[]}},flickr:{get:function(e){VMM.master_config.flickr.que.push(e),VMM.master_config.flickr.active=!0},create:function(e,t){var a,i=setTimeout(t,VMM.master_config.timers.api,e);a="undefined"!=typeof VMM.master_config.Timeline&&""!=VMM.master_config.Timeline.api_keys.flickr?VMM.master_config.Timeline.api_keys.flickr:Aes.Ctr.decrypt(VMM.master_config.api_keys_master.flickr,VMM.master_config.vp,256);var o="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+a+"&photo_id="+e.id+"&format=json&jsoncallback=?";VMM.getJSON(o,function(t){var a,i,o=(VMM.ExternalAPI.flickr.getFlickrIdFromUrl(t.sizes.size[0].url),"#"+e.uid),r="#"+e.uid+"_thumb",n=!1,s="Large";s=VMM.ExternalAPI.flickr.sizes(VMM.master_config.sizes.api.height);for(var l=0;l<t.sizes.size.length;l++)t.sizes.size[l].label==s&&(n=!0,a=t.sizes.size[l].source);n||(a=t.sizes.size[t.sizes.size.length-2].source),i=t.sizes.size[0].source,VMM.Lib.attr(o,"src",a),VMM.attachElement(r,"<img src='"+i+"'>")}).error(function(e,t){trace("FLICKR error"),trace("FLICKR ERROR: "+t+" "+e.responseText)}).success(function(){clearTimeout(i),t()})},pushQue:function(){VMM.master_config.flickr.que.length>0&&(VMM.ExternalAPI.flickr.create(VMM.master_config.flickr.que[0],VMM.ExternalAPI.flickr.pushQue),VMM.Util.removeRange(VMM.master_config.flickr.que,0))},sizes:function(e){var t="";return t=75>=e?"Thumbnail":180>=e?"Small":240>=e?"Small 320":375>=e?"Medium":480>=e?"Medium 640":600>=e?"Large":"Large"},getFlickrIdFromUrl:function(e){var t=e.indexOf("flickr.com/photos/");if(-1==t)return null;var a=t+"flickr.com/photos/".length,i=e.substr(a);return-1==i.indexOf("/")?null:(0==i.indexOf("/")&&(i=i.substr(1)),i.split("/")[1])}},instagram:{get:function(e,t){return t?"//instagr.am/p/"+e.id+"/media/?size=t":"//instagr.am/p/"+e.id+"/media/?size="+VMM.ExternalAPI.instagram.sizes(VMM.master_config.sizes.api.height)},sizes:function(e){var t="";return t=150>=e?"t":306>=e?"m":"l"},isInstagramUrl:function(e){return e.match("instagr.am/p/")||e.match("instagram.com/p/")},getInstagramIdFromUrl:function(e){try{return e.split("/p/")[1].split("/")[0]}catch(t){return trace("Invalid Instagram url: "+e),null}}},soundcloud:{get:function(e){VMM.master_config.soundcloud.que.push(e),VMM.master_config.soundcloud.active=!0},create:function(e,t){var a="//soundcloud.com/oembed?url="+e.id+"&maxheight=168&format=js&callback=?";VMM.getJSON(a,function(a){VMM.attachElement("#"+e.uid,a.html),t()})},pushQue:function(){VMM.master_config.soundcloud.que.length>0&&(VMM.ExternalAPI.soundcloud.create(VMM.master_config.soundcloud.que[0],VMM.ExternalAPI.soundcloud.pushQue),VMM.Util.removeRange(VMM.master_config.soundcloud.que,0))}},wikipedia:{get:function(e){VMM.master_config.wikipedia.que.push(e),VMM.master_config.wikipedia.active=!0},create:function(e,t){var a="//"+e.lang+".wikipedia.org/w/api.php?action=query&prop=extracts&redirects=&titles="+e.id+"&exintro=1&format=json&callback=?";if(callback_timeout=setTimeout(t,VMM.master_config.timers.api,e),"Explorer"==VMM.Browser.browser&&parseInt(VMM.Browser.version,10)>=7&&window.XDomainRequest){var i="<h4><a href='http://"+VMM.master_config.language.api.wikipedia+".wikipedia.org/wiki/"+e.id+"' target='_blank'>"+e.url+"</a></h4>";i+="<span class='wiki-source'>"+VMM.master_config.language.messages.wikipedia+"</span>",i+="<p>Wikipedia entry unable to load using Internet Explorer 8 or below.</p>",VMM.attachElement("#"+e.uid,i)}VMM.getJSON(a,function(t){if(t.query){var a,i,o="",r="",n=1,s=[];a=VMM.Util.getObjectAttributeByIndex(t.query.pages,0).extract,i=VMM.Util.getObjectAttributeByIndex(t.query.pages,0).title,a.match("<p>")?s=a.split("<p>"):s.push(a);for(var l=0;l<s.length;l++)n>=l+1&&l+1<s.length&&(r+="<p>"+s[l+1]);o="<h4><a href='http://"+VMM.master_config.language.api.wikipedia+".wikipedia.org/wiki/"+i+"' target='_blank'>"+i+"</a></h4>",o+="<span class='wiki-source'>"+VMM.master_config.language.messages.wikipedia+"</span>",o+=VMM.Util.linkify_wikipedia(r),a.match("REDIRECT")||VMM.attachElement("#"+e.uid,o)}}).error(function(a,i,o){trace("WIKIPEDIA error"),trace("WIKIPEDIA ERROR: "+i+" "+a.responseText),trace(o),VMM.attachElement("#"+e.uid,VMM.MediaElement.loadingmessage("<p>Wikipedia is not responding</p>")),clearTimeout(callback_timeout),VMM.master_config.wikipedia.tries<4?(trace("WIKIPEDIA ATTEMPT "+VMM.master_config.wikipedia.tries),trace(e),VMM.master_config.wikipedia.tries++,VMM.ExternalAPI.wikipedia.create(e,t)):t()}).success(function(){VMM.master_config.wikipedia.tries=0,clearTimeout(callback_timeout),t()})},pushQue:function(){VMM.master_config.wikipedia.que.length>0&&(trace("WIKIPEDIA PUSH QUE "+VMM.master_config.wikipedia.que.length),VMM.ExternalAPI.wikipedia.create(VMM.master_config.wikipedia.que[0],VMM.ExternalAPI.wikipedia.pushQue),VMM.Util.removeRange(VMM.master_config.wikipedia.que,0))}},youtube:{get:function(e){var t="//gdata.youtube.com/feeds/api/videos/"+e.id+"?v=2&alt=jsonc&callback=?";VMM.master_config.youtube.que.push(e),VMM.master_config.youtube.active||VMM.master_config.youtube.api_loaded||LoadLib.js("//www.youtube.com/player_api",function(){trace("YouTube API Library Loaded")}),VMM.getJSON(t,function(t){VMM.ExternalAPI.youtube.createThumb(t,e)})},create:function(e){if("undefined"!=typeof e.start){var t=e.start.toString(),a=0,i=0;t.match("m")?(a=parseInt(t.split("m")[0],10),i=parseInt(t.split("m")[1].split("s")[0],10),e.start=60*a+i):e.start=0}else e.start=0;var o={active:!1,player:{},name:e.uid,playing:!1,hd:!1};"undefined"!=typeof e.hd&&(o.hd=!0),o.player[e.id]=new YT.Player(e.uid,{height:"390",width:"640",playerVars:{enablejsapi:1,color:"white",showinfo:0,theme:"light",start:e.start,rel:0},videoId:e.id,events:{onReady:VMM.ExternalAPI.youtube.onPlayerReady,onStateChange:VMM.ExternalAPI.youtube.onStateChange}}),VMM.master_config.youtube.array.push(o)},createThumb:function(e,t){if(trace("CREATE THUMB"),trace(e),trace(t),"undefined"!=typeof e.data){var a="#"+t.uid+"_thumb";VMM.attachElement(a,"<img src='"+e.data.thumbnail.sqDefault+"'>")}},pushQue:function(){for(var e=0;e<VMM.master_config.youtube.que.length;e++)VMM.ExternalAPI.youtube.create(VMM.master_config.youtube.que[e]);VMM.master_config.youtube.que=[]},onAPIReady:function(){VMM.master_config.youtube.active=!0,VMM.ExternalAPI.youtube.pushQue()},stopPlayers:function(){for(var e=0;e<VMM.master_config.youtube.array.length;e++)VMM.master_config.youtube.array[e].playing&&"undefined"!=typeof VMM.master_config.youtube.array[e].player.the_name&&VMM.master_config.youtube.array[e].player.the_name.stopVideo()},onStateChange:function(e){for(var t=0;t<VMM.master_config.youtube.array.length;t++){for(var a in VMM.master_config.youtube.array[t].player)VMM.master_config.youtube.array[t].player[a]==e.target&&(VMM.master_config.youtube.array[t].player.the_name=VMM.master_config.youtube.array[t].player[a]);VMM.master_config.youtube.array[t].player.the_name==e.target&&e.data==YT.PlayerState.PLAYING&&(VMM.master_config.youtube.array[t].playing=!0,VMM.master_config.youtube.array[t].hd===!1&&(VMM.master_config.youtube.array[t].hd=!0,VMM.master_config.youtube.array[t].player.the_name.setPlaybackQuality("hd720")))}},onPlayerReady:function(){}},vimeo:{get:function(e){VMM.master_config.vimeo.que.push(e),VMM.master_config.vimeo.active=!0},create:function(e,t){trace("VIMEO CREATE");var a="//vimeo.com/api/v2/video/"+e.id+".json",i="//player.vimeo.com/video/"+e.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff";VMM.getJSON(a,function(a){VMM.ExternalAPI.vimeo.createThumb(a,e),t()}),VMM.attachElement("#"+e.uid,"<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+i+"'></iframe>")},createThumb:function(e,t){trace("VIMEO CREATE THUMB");var a="#"+t.uid+"_thumb";VMM.attachElement(a,"<img src='"+e[0].thumbnail_small+"'>")},pushQue:function(){VMM.master_config.vimeo.que.length>0&&(VMM.ExternalAPI.vimeo.create(VMM.master_config.vimeo.que[0],VMM.ExternalAPI.vimeo.pushQue),VMM.Util.removeRange(VMM.master_config.vimeo.que,0))}},vine:{get:function(e){VMM.master_config.vine.que.push(e),VMM.master_config.vine.active=!0},create:function(e){trace("VINE CREATE");var t="https://vine.co/v/"+e.id+"/embed/simple";VMM.attachElement("#"+e.uid,"<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='http://platform.vine.co/static/scripts/embed.js' charset='utf-8'></script>")},pushQue:function(){VMM.master_config.vine.que.length>0&&(VMM.ExternalAPI.vine.create(VMM.master_config.vine.que[0],VMM.ExternalAPI.vine.pushQue),VMM.Util.removeRange(VMM.master_config.vine.que,0))}},webthumb:{get:function(e){VMM.master_config.webthumb.que.push(e),VMM.master_config.webthumb.active=!0},sizes:function(e){var t="";return t=150>=e?"t":306>=e?"m":"l"},create:function(e){trace("WEB THUMB CREATE");var t="//api.pagepeeker.com/v2/thumbs.php?";url=e.id.replace("http://",""),VMM.attachElement("#"+e.uid,"<a href='"+e.id+"' target='_blank'><img src='"+t+"size=x&url="+url+"'></a>"),VMM.attachElement("#"+e.uid+"_thumb","<img src='"+t+"size=t&url="+url+"'>")},pushQue:function(){for(var e=0;e<VMM.master_config.webthumb.que.length;e++)VMM.ExternalAPI.webthumb.create(VMM.master_config.webthumb.que[e]);VMM.master_config.webthumb.que=[]}}}.init());