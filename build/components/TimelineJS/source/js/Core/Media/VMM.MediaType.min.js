"undefined"!=typeof VMM&&"undefined"==typeof VMM.MediaType&&(VMM.MediaType=function(e){var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),i=!1,a={type:"unknown",id:"",start:0,hd:!1,link:"",lang:VMM.Language.lang,uniqueid:VMM.Util.unique_ID(6)};if(t.match("div class='twitter'"))a.type="twitter-ready",a.id=t,i=!0;else if(t.match("<blockquote"))a.type="quote",a.id=t,i=!0;else if(t.match("<iframe"))a.type="iframe",trace("IFRAME"),regex=/src=['"](\S+?)['"]/,group=t.match(regex),group&&(a.id=group[1]),trace("iframe url: "+a.id),i=Boolean(a.id);else if(t.match("(www.)?youtube|youtu.be"))t.match("v=")?a.id=VMM.Util.getUrlVars(t).v:t.match("/embed/")?a.id=t.split("embed/")[1].split(/[?&]/)[0]:t.match(/v\/|v=|youtu\.be\//)?a.id=t.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:trace("YOUTUBE IN URL BUT NOT A VALID VIDEO"),a.start=VMM.Util.getUrlVars(t).t,a.hd=VMM.Util.getUrlVars(t).hd,a.type="youtube",i=!0;else if(t.match("(player.)?vimeo.com"))a.type="vimeo",a.id=t.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0],i=!0;else if(t.match("(www.)?dailymotion.com"))a.id=t.split(/video\/|\/\/dailymotion\.com\//)[1],a.type="dailymotion",i=!0;else if(t.match("(www.)?vine.co"))trace("VINE"),t.match("vine.co/v/")&&(a.id=t.split("vine.co/v/")[1],trace(a.id)),trace(t),a.type="vine",i=!0;else if(t.match("(player.)?soundcloud.com"))a.type="soundcloud",a.id=t,i=!0;else if(t.match("(www.)?twitter.com")&&t.match("status"))a.id=t.match("status/")?t.split("status/")[1]:t.match("statuses/")?t.split("statuses/")[1]:"",a.type="twitter",i=!0;else if(!t.match("maps.google")||t.match("staticmap")||t.match("streetview"))if(t.match(/www.google.\w+\/maps/))a.type="google-map",a.id=t,i=!0;else if(t.match("plus.google"))a.type="googleplus",a.id=t.split("/posts/")[1],a.user=t.split("/posts/")[0].match("u/0/")?t.split("u/0/")[1].split("/posts")[0]:t.split("google.com/")[1].split("/posts/")[0],i=!0;else if(t.match("flickr.com/photos/"))a.type="flickr",a.id=VMM.ExternalAPI.flickr.getFlickrIdFromUrl(t),a.link=t,i=Boolean(a.id);else if(VMM.ExternalAPI.instagram.isInstagramUrl(t))a.type="instagram",a.link=t,a.id=VMM.ExternalAPI.instagram.getInstagramIdFromUrl(t),i=Boolean(a.id);else if(t.match(/jpg|jpeg|png|gif|svg|bmp/i)||t.match("staticmap")||t.match("yfrog.com")||t.match("twitpic.com")||t.match("maps.googleapis.com/maps/api/streetview"))a.type="image",a.id=t,i=!0;else if(VMM.FileExtention.googleDocType(t))a.type="googledoc",a.id=t,i=!0;else if(t.match("(www.)?wikipedia.org")){a.type="wikipedia";var s=t.split("wiki/")[1].split("#")[0].replace("_"," ");a.id=s.replace(" ","%20"),a.lang=t.split("//")[1].split(".wikipedia")[0],i=!0}else 0==t.indexOf("http://")?(a.type="website",a.id=t,i=!0):t.match("storify")?(a.type="storify",a.id=t,i=!0):(trace("unknown media"),a.type="unknown",a.id=t,i=!0);else a.type="google-map",a.id=t,i=!0;return i?a:(trace("No valid media id detected"),trace(t),!1)});