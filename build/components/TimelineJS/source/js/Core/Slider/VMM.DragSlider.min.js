"undefined"!=typeof VMM&&"undefined"==typeof VMM.DragSlider&&(VMM.DragSlider=function(){function e(e,i){VMM.bindEvent(e,n,m.down,{element:i,delement:e}),VMM.bindEvent(e,a,m.up,{element:i,delement:e}),VMM.bindEvent(e,t,m.leave,{element:i,delement:e})}function t(e){return VMM.unbindEvent(e.data.delement,i,m.move),d.touch||e.preventDefault(),e.stopPropagation(),d.sliding?(d.sliding=!1,s(e.data.element,e.data.delement,e),!1):!0}function n(e){return o(e.data.element,e.data.delement,e),d.touch||e.preventDefault(),!0}function a(e){return d.touch||e.preventDefault(),d.sliding?(d.sliding=!1,s(e.data.element,e.data.delement,e),!1):!0}function i(e){l(e.data.element,e)}function o(e,t,n){d.touch?(trace("IS TOUCH"),VMM.Lib.css(e,"-webkit-transition-duration","0"),d.pagex.start=n.originalEvent.touches[0].screenX,d.pagey.start=n.originalEvent.touches[0].screenY):(d.pagex.start=n.pageX,d.pagey.start=n.pageY),d.left.start=u(e),d.time.start=(new Date).getTime(),VMM.Lib.stop(e),VMM.bindEvent(t,i,m.move,{element:e})}function s(e,t,n){VMM.unbindEvent(t,i,m.move),r(e,n)}function l(e,t){var n;d.sliding=!0,d.touch?(d.pagex.end=t.originalEvent.touches[0].screenX,d.pagey.end=t.originalEvent.touches[0].screenY):(d.pagex.end=t.pageX,d.pagey.end=t.pageY),d.left.end=u(e),n=-(d.pagex.start-d.pagex.end-d.left.start),Math.abs(d.pagey.start)-Math.abs(d.pagey.end)>10&&(trace("SCROLLING Y"),trace(Math.abs(d.pagey.start)-Math.abs(d.pagey.end))),Math.abs(n-d.left.start)>10&&(VMM.Lib.css(e,"left",n),t.preventDefault(),t.stopPropagation())}function r(e){var t={left:d.left.end,left_adjust:0,change:{x:0},time:10*((new Date).getTime()-d.time.start),time_adjust:10*((new Date).getTime()-d.time.start)},n=3e3;d.touch&&(n=6e3),t.change.x=n*(Math.abs(d.pagex.end)-Math.abs(d.pagex.start)),t.left_adjust=Math.round(t.change.x/t.time),t.left=Math.min(t.left+t.left_adjust),d.constraint&&(t.left>d.constraint.left?(t.left=d.constraint.left,t.time>5e3&&(t.time=5e3)):t.left<d.constraint.right&&(t.left=d.constraint.right,t.time>5e3&&(t.time=5e3))),VMM.fireEvent(g,"DRAGUPDATE",[t]),M||t.time>0&&(d.touch?VMM.Lib.animate(e,t.time,"easeOutCirc",{left:t.left}):VMM.Lib.animate(e,t.time,d.ease,{left:t.left}))}function u(e){return parseInt(VMM.Lib.css(e,"left").substring(0,VMM.Lib.css(e,"left").length-2),10)}var d={element:"",element_move:"",constraint:"",sliding:!1,pagex:{start:0,end:0},pagey:{start:0,end:0},left:{start:0,end:0},time:{start:0,end:0},touch:!1,ease:"easeOutExpo"},m={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},c={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},f={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},g=this,M=!1;this.createPanel=function(t,n,a,i,o){d.element=t,d.element_move=n,null!=o&&""!=o&&(M=o),d.constraint=null!=a&&""!=a?a:!1,d.touch=i?i:!1,trace("TOUCH"+d.touch),m=d.touch?f:c,e(d.element,d.element_move)},this.updateConstraint=function(e){trace("updateConstraint"),d.constraint=e},this.cancelSlide=function(){return VMM.unbindEvent(d.element,i,m.move),!0}});