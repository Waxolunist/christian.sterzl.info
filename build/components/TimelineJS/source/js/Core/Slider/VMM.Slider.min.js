"undefined"!=typeof VMM&&"undefined"==typeof VMM.Slider&&(VMM.Slider=function(e,t){function i(e,t){var i=!0,d=!1;null!=e&&(i=e),null!=t&&(d=t),C=w.slider.width,w.slider.nav.height=VMM.Lib.height(O.prevBtnContainer),w.slider.content.padding="mobile"==VMM.Browser.device||640>=C?10:w.slider.content.padding_default,w.slider.content.width=C-2*w.slider.content.padding,VMM.Lib.width(E,D.length*w.slider.content.width),d&&VMM.Lib.css(y,"left",D[G].leftpos()),m(),c(),VMM.Lib.css(O.nextBtn,"left",C-w.slider.nav.width),VMM.Lib.height(O.prevBtn,w.slider.height),VMM.Lib.height(O.nextBtn,w.slider.height),VMM.Lib.css(O.nextBtnContainer,"top",w.slider.height/2-w.slider.nav.height/2+10),VMM.Lib.css(O.prevBtnContainer,"top",w.slider.height/2-w.slider.nav.height/2+10),VMM.Lib.height(L,w.slider.height),VMM.Lib.width(L,C),i&&V(G,"linear",1),0==G&&VMM.Lib.visible(O.prevBtn,!1)}function d(e,t){trace("DRAG FINISH"),trace(t.left_adjust),trace(w.slider.width/2),t.left_adjust<0?Math.abs(t.left_adjust)>w.slider.width/2?G==D.length-1?b():(V(G+1,"easeOutExpo"),s()):b():Math.abs(t.left_adjust)>w.slider.width/2?0==G?b():(V(G-1,"easeOutExpo"),s()):b()}function n(){G==D.length-1?b():(V(G+1),s())}function a(){0==G?b():(V(G-1),s())}function M(e){switch(e.keyCode){case 39:n(e);break;case 37:a(e)}}function h(){u()}function s(){w.current_slide=G,VMM.fireEvent(S,"UPDATE")}function l(e){var t=0;for(VMM.attachElement(E,""),D=[],t=0;t<e.length;t++){var i=new VMM.Slider.Slide(e[t],E);D.push(i)}}function r(e){var t=0;if(e)o();else{for(t=0;t<D.length;t++)D[t].clearTimers();f=setTimeout(o,w.duration)}}function o(){var e=0;for(e=0;e<D.length;e++)D[e].enqueue=!0;for(e=0;e<w.preload;e++)G+e>D.length-1||(D[G+e].show(),D[G+e].enqueue=!1),0>G-e||(D[G-e].show(),D[G-e].enqueue=!1);if(D.length>50)for(e=0;e<D.length;e++)D[e].enqueue&&D[e].hide();m()}function m(){var e=0,t=".slider-item .layout-text-media .media .media-container ",i=".slider-item .layout-media .media .media-container ",d=".slider-item .media .media-container",n=!1,a={text_media:{width:w.slider.content.width/100*60,height:w.slider.height-60,video:{width:0,height:0},text:{width:w.slider.content.width/100*40-30,height:w.slider.height}},media:{width:w.slider.content.width,height:w.slider.height-110,video:{width:0,height:0}}};for(("mobile"==VMM.Browser.device||641>C)&&(n=!0),VMM.master_config.sizes.api.width=a.media.width,VMM.master_config.sizes.api.height=a.media.height,a.text_media.video=VMM.Util.ratio.fit(a.text_media.width,a.text_media.height,16,9),a.media.video=VMM.Util.ratio.fit(a.media.width,a.media.height,16,9),VMM.Lib.css(".slider-item","width",w.slider.content.width),VMM.Lib.height(".slider-item",w.slider.height),n?(a.text_media.width=w.slider.content.width-2*w.slider.content.padding,a.media.width=w.slider.content.width-2*w.slider.content.padding,a.text_media.height=w.slider.height/100*50-50,a.media.height=w.slider.height/100*70-40,a.text_media.video=VMM.Util.ratio.fit(a.text_media.width,a.text_media.height,16,9),a.media.video=VMM.Util.ratio.fit(a.media.width,a.media.height,16,9),VMM.Lib.css(".slider-item .layout-text-media .text","width","100%"),VMM.Lib.css(".slider-item .layout-text-media .text","display","block"),VMM.Lib.css(".slider-item .layout-text-media .text .container","display","block"),VMM.Lib.css(".slider-item .layout-text-media .text .container","width",a.media.width),VMM.Lib.css(".slider-item .layout-text-media .text .container .start","width","auto"),VMM.Lib.css(".slider-item .layout-text-media .media","float","none"),VMM.Lib.addClass(".slider-item .content-container","pad-top"),VMM.Lib.css(".slider-item .media blockquote p","line-height","18px"),VMM.Lib.css(".slider-item .media blockquote p","font-size","16px"),VMM.Lib.css(".slider-item","overflow-y","auto")):(VMM.Lib.css(".slider-item .layout-text-media .text","width","40%"),VMM.Lib.css(".slider-item .layout-text-media .text","display","table-cell"),VMM.Lib.css(".slider-item .layout-text-media .text .container","display","table-cell"),VMM.Lib.css(".slider-item .layout-text-media .text .container","width","auto"),VMM.Lib.css(".slider-item .layout-text-media .text .container .start","width",a.text_media.text.width),VMM.Lib.removeClass(".slider-item .content-container","pad-top"),VMM.Lib.css(".slider-item .layout-text-media .media","float","left"),VMM.Lib.css(".slider-item .layout-text-media","display","table"),VMM.Lib.css(".slider-item .media blockquote p","line-height","36px"),VMM.Lib.css(".slider-item .media blockquote p","font-size","28px"),VMM.Lib.css(".slider-item","display","table"),VMM.Lib.css(".slider-item","overflow-y","auto")),VMM.Lib.css(t+".media-frame","max-width",a.text_media.width),VMM.Lib.height(t+".media-frame",a.text_media.height),VMM.Lib.width(t+".media-frame",a.text_media.width),VMM.Lib.css(t+"img","max-height",a.text_media.height),VMM.Lib.css(i+"img","max-height",a.media.height),VMM.Lib.css(t+"img","max-width",a.text_media.width),VMM.Lib.css(t+".avatar img","max-width",32),VMM.Lib.css(t+".avatar img","max-height",32),VMM.Lib.css(i+".avatar img","max-width",32),VMM.Lib.css(i+".avatar img","max-height",32),VMM.Lib.css(t+".article-thumb","max-width","50%"),VMM.Lib.css(i+".article-thumb","max-width",200),VMM.Lib.width(t+".media-frame",a.text_media.video.width),VMM.Lib.height(t+".media-frame",a.text_media.video.height),VMM.Lib.width(i+".media-frame",a.media.video.width),VMM.Lib.height(i+".media-frame",a.media.video.height),VMM.Lib.css(i+".media-frame","max-height",a.media.video.height),VMM.Lib.css(i+".media-frame","max-width",a.media.video.width),VMM.Lib.height(i+".soundcloud",168),VMM.Lib.height(t+".soundcloud",168),VMM.Lib.width(i+".soundcloud",a.media.width),VMM.Lib.width(t+".soundcloud",a.text_media.width),VMM.Lib.css(d+".soundcloud","max-height",168),VMM.Lib.height(t+".map",a.text_media.height),VMM.Lib.width(t+".map",a.text_media.width),VMM.Lib.css(i+".map","max-height",a.media.height),VMM.Lib.width(i+".map",a.media.width),VMM.Lib.height(t+".doc",a.text_media.height),VMM.Lib.width(t+".doc",a.text_media.width),VMM.Lib.height(i+".doc",a.media.height),VMM.Lib.width(i+".doc",a.media.width),VMM.Lib.width(i+".wikipedia",a.media.width),VMM.Lib.width(i+".twitter",a.media.width),VMM.Lib.width(i+".plain-text-quote",a.media.width),VMM.Lib.width(i+".plain-text",a.media.width),VMM.Lib.css(d,"max-width",a.media.width),VMM.Lib.css(t+".caption","max-width",a.text_media.video.width),VMM.Lib.css(i+".caption","max-width",a.media.video.width),e=0;e<D.length;e++)D[e].layout(n),D[e].content_height()>w.slider.height+20?D[e].css("display","block"):D[e].css("display","table")}function c(){var e=0,t=0;for(t=0;t<D.length;t++)e=t*(w.slider.width+w.spacing),D[t].leftpos(e)}function V(e,t,i,d,n){var a,M=w.ease,h=w.duration,s=!1,l=!1,o="";if(VMM.ExternalAPI.youtube.stopPlayers(),G=e,a=D[G].leftpos(),0==G&&(l=!0),G+1>=D.length&&(s=!0),null!=t&&""!=t&&(M=t),null!=i&&""!=i&&(h=i),"mobile"==VMM.Browser.device?(VMM.Lib.visible(O.prevBtn,!1),VMM.Lib.visible(O.nextBtn,!1)):(l?VMM.Lib.visible(O.prevBtn,!1):(VMM.Lib.visible(O.prevBtn,!0),o=VMM.Util.unlinkify(A[G-1].title),"timeline"==w.type?"undefined"==typeof A[G-1].date?(VMM.attachElement(O.prevDate,o),VMM.attachElement(O.prevTitle,"")):(VMM.attachElement(O.prevDate,VMM.Date.prettyDate(A[G-1].startdate,!1,A[G-1].precisiondate)),VMM.attachElement(O.prevTitle,o)):VMM.attachElement(O.prevTitle,o)),s?VMM.Lib.visible(O.nextBtn,!1):(VMM.Lib.visible(O.nextBtn,!0),o=VMM.Util.unlinkify(A[G+1].title),"timeline"==w.type?"undefined"==typeof A[G+1].date?(VMM.attachElement(O.nextDate,o),VMM.attachElement(O.nextTitle,"")):(VMM.attachElement(O.nextDate,VMM.Date.prettyDate(A[G+1].startdate,!1,A[G+1].precisiondate)),VMM.attachElement(O.nextTitle,o)):VMM.attachElement(O.nextTitle,o))),d?VMM.Lib.css(y,"left",-(a-w.slider.content.padding)):(VMM.Lib.stop(y),VMM.Lib.animate(y,h,M,{left:-(a-w.slider.content.padding)})),n&&VMM.fireEvent(S,"LOADED"),D[G].height()>w.slider_height)VMM.Lib.css(".slider","overflow-y","scroll");else{VMM.Lib.css(S,"overflow-y","hidden");var m=0;try{m=VMM.Lib.prop(S,"scrollHeight"),VMM.Lib.animate(S,h,M,{scrollTop:m-VMM.Lib.height(S)})}catch(c){m=VMM.Lib.height(S)}}r(),VMM.fireEvent(x,"MESSAGE","TEST")}function b(){VMM.Lib.stop(y),VMM.Lib.animate(y,w.duration,"easeOutExpo",{left:-D[G].leftpos()+w.slider.content.padding})}function p(e,t){trace("showMessege "+t),VMM.attachElement(B,"<div class='vco-explainer'><div class='vco-explainer-container'><div class='vco-bezel'><div class='vco-gesture-icon'></div><div class='vco-message'><p>"+t+"</p></div></div></div></div>")}function u(){VMM.Lib.detach(B)}function v(){var e="<div class='icon'>&nbsp;</div>";O.nextBtn=VMM.appendAndGetElement(x,"<div>","nav-next"),O.prevBtn=VMM.appendAndGetElement(x,"<div>","nav-previous"),O.nextBtnContainer=VMM.appendAndGetElement(O.nextBtn,"<div>","nav-container",e),O.prevBtnContainer=VMM.appendAndGetElement(O.prevBtn,"<div>","nav-container",e),"timeline"==w.type&&(O.nextDate=VMM.appendAndGetElement(O.nextBtnContainer,"<div>","date",""),O.prevDate=VMM.appendAndGetElement(O.prevBtnContainer,"<div>","date","")),O.nextTitle=VMM.appendAndGetElement(O.nextBtnContainer,"<div>","title",""),O.prevTitle=VMM.appendAndGetElement(O.prevBtnContainer,"<div>","title",""),VMM.bindEvent(".nav-next",n),VMM.bindEvent(".nav-previous",a),VMM.bindEvent(window,M,"keydown")}function g(){var e=3e3;VMM.attachElement(S,""),x=VMM.getElement(S),L=VMM.appendAndGetElement(x,"<div>","slider-container-mask"),y=VMM.appendAndGetElement(L,"<div>","slider-container"),E=VMM.appendAndGetElement(y,"<div>","slider-item-container"),v(),l(A),("tablet"==VMM.Browser.device||"mobile"==VMM.Browser.device)&&(w.duration=500,e=1e3,_=new VMM.DragSlider,_.createPanel(x,y,"",w.touch,!0),VMM.bindEvent(_,d,"DRAGUPDATE"),B=VMM.appendAndGetElement(L,"<div>","vco-feedback",""),p(null,"Swipe to Navigate"),VMM.Lib.height(B,w.slider.height),VMM.bindEvent(B,h),VMM.bindEvent(B,h,"touchend")),i(!1,!0),VMM.Lib.visible(O.prevBtn,!1),V(w.current_slide,"easeOutExpo",e,!0,!0),k=!0}var w,f,x,L,y,E,_,B,A=[],D=[],T=[],G=0,C=960,k=!1,S=e,O={nextBtn:"",prevBtn:"",nextDate:"",prevDate:"",nextTitle:"",prevTitle:""};w="undefined"!=typeof t?t:{preload:4,current_slide:0,interval:10,something:0,width:720,height:400,ease:"easeInOutExpo",duration:1e3,timeline:!1,spacing:15,slider:{width:720,height:400,content:{width:720,height:400,padding:120,padding_default:120},nav:{width:100,height:200}}},this.ver="0.6",w.slider.width=w.width,w.slider.height=w.height,this.init=function(e){D=[],T=[],"undefined"!=typeof e?this.setData(e):trace("WAITING ON DATA")},this.width=function(e){return null==e||""==e?w.slider.width:(w.slider.width=e,void i())},this.height=function(e){return null==e||""==e?w.slider.height:(w.slider.height=e,void i())},this.setData=function(e){"undefined"!=typeof e?(A=e,g()):trace("NO DATA")},this.getData=function(){return A},this.setConfig=function(e){"undefined"!=typeof e?w=e:trace("NO CONFIG DATA")},this.getConfig=function(){return w},this.setSize=function(e,t){null!=e&&(w.slider.width=e),null!=t&&(w.slider.height=t),k&&i()},this.active=function(){return k},this.getCurrentNumber=function(){return G},this.setSlide=function(e){V(e)}});