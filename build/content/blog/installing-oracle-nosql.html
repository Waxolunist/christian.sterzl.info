<h1 id="installing-oracle-nosql">Installing Oracle NoSQL</h1>
<p>For some time now are various nosql databases on my radar. I played with CouchDB, read about Apache Cassandra and MongoDB. Also Redis is on my planned feature list for my website. And last week I started reading about oracles interpretation of nosql.</p>
<p>The best source for information about Oracle NoSQL is its homepage: <a href="http://www.oracle.com/technetwork/products/nosqldb/overview/index.html" target="_blank">http://www.oracle.com/technetwork/products/nosqldb/overview/index.html</a></p>
<p>Oracles NoSQL database is a classical key-value store with a lot of features regarding high availability. The documentation is very detailed as usual. The NoSQL database comes in two flavors: Enterprise Edition and Community Edition.</p>
<p>The database supports every system, java runs on. It requires at least a jre 6. I installed the database with jre 1.7 on an Ubuntu 13.04 server running in a Virtualbox VM. </p>
<p>First, download the community edition of the database. I downloaded the latest version 12.1.2.1.8. After that I extracted the file to <code>/opt</code> and set a symlink:</p>
<pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /opt
<span class="hljs-built_in">sudo</span> ln <span class="hljs-operator">-s</span> kv-<span class="hljs-number">2.1</span>.<span class="hljs-number">8</span> kv
</code></pre>
<p>I wanted to run the database with its own user. Thus I created first the system user nosql:</p>
<pre><code class="hljs bash">useradd -r <span class="hljs-operator">-s</span> /usr/sbin/nologin <span class="hljs-operator">-d</span> /var/kv nosql
</code></pre>
<p>Then I created the future data directory <code>/var/kv</code>.</p>
<p>The details of the following steps are explained in the resources of the homepage of Oracle NoSQL. I&#39;ll keep it short (my hostname is <code>ubuntu</code> by the way):</p>
<p><strong>Create the config</strong>:</p>
<pre><code class="hljs bash">sudo -u nosql java -jar <span class="hljs-regexp">/opt/</span>kv<span class="hljs-regexp">/lib/</span>kvstore.jar makebootconfig -root <span class="hljs-regexp">/var/</span>kv<span class="hljs-regexp">/kvroot -port 5000 -admin 5001 -host ubuntu -harange 5010,5020 -capacity 1 -num_cpus 0 -memory_mb 0</span>
</code></pre>
<p><strong>Start the server</strong>:</p>
<pre><code class="hljs bash">sudo -u nosql java -jar <span class="hljs-regexp">/opt/</span>kv<span class="hljs-regexp">/lib/</span>kvstore.jar start -root <span class="hljs-regexp">/var/</span>kv<span class="hljs-regexp">/kvroot &amp;</span>
</code></pre>
<p><strong>Test if the server is running</strong>:</p>
<pre><code class="hljs bash">sudo -u nosql jps -m
java -jar <span class="hljs-regexp">/opt/</span>kv<span class="hljs-regexp">/lib/</span>kvstore.jar ping -port <span class="hljs-number">5000</span> -host ubuntu
</code></pre>
<p><strong>Start the admin cli</strong>:</p>
<pre><code class="hljs bash">sudo -u nosql java -jar <span class="hljs-regexp">/opt/</span>kv<span class="hljs-regexp">/lib/</span>kvstore.jar runadmin -port <span class="hljs-number">5000</span> -host ubuntu
</code></pre>
<p><strong>Configure the server</strong>:</p>
<pre><code class="hljs bash"><span class="hljs-input"><span class="hljs-prompt">kv-&gt;</span> configure -name mystore</span>
<span class="hljs-input"><span class="hljs-prompt">kv-&gt;</span> plan deploy-datacenter -name <span class="hljs-string">"VM-1"</span> -rf <span class="hljs-number">3</span> -wait</span>
<span class="hljs-input"><span class="hljs-prompt">kv-&gt;</span> plan deploy-sn -dc dc1 -host ubuntu -port <span class="hljs-number">5000</span> -wait</span>
<span class="hljs-input"><span class="hljs-prompt">kv-&gt;</span> plan deploy-admin -sn sn1 -port <span class="hljs-number">5001</span> -wait </span>
<span class="hljs-input"><span class="hljs-prompt">kv-&gt;</span> pool create -name <span class="hljs-constant">VMPool</span></span>
<span class="hljs-input"><span class="hljs-prompt">kv-&gt;</span> pool join -name <span class="hljs-constant">VMPool</span> -sn sn1</span>
</code></pre>
<p>If everything was successful you can see the result in the admin web console.</p>
<p><img src="/assets/blog/adminconsole.png" alt="Admin Web Console" width="80%"/></p>
<p>Now you can start playing around with Oracles NoSQL storage solution. A good start are the examples delivered together with the community edition.</p>
